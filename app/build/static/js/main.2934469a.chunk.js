(this["webpackJsonpSwipe-to-like"]=this["webpackJsonpSwipe-to-like"]||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},22:function(e,t,a){},23:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(14),c=a.n(i),s=(a(22),a(3)),r=a(4),u=a(2),l=a(6),m=a(5),h=(a(23),a(7)),p=a(8),v=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={mouse_down:!1,start_x:0,start_y:0,x:0,y:0,choice:null,cover_opacity:0},n.on_mouse_down=n.on_mouse_down.bind(Object(u.a)(n)),n.on_mouse_up=n.on_mouse_up.bind(Object(u.a)(n)),n.on_mouse_move=n.on_mouse_move.bind(Object(u.a)(n)),n}return Object(r.a)(a,[{key:"get_event_cordinates",value:function(e){if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var t=e.touches[0]||e.changedTouches[0];return{x:t.pageX,y:t.pageY}}if("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)return{x:e.clientX,y:e.clientY}}},{key:"on_mouse_down",value:function(e){var t=this.get_event_cordinates(e);this.setState({mouse_down:!0,start_x:t.x,start_y:t.y})}},{key:"on_mouse_up",value:function(e){null!==this.state.choice&&(this.state.choice?this.props.photo_action("like"):this.props.photo_action("unlike")),this.setState({start_x:0,start_y:0,x:0,y:0,choice:null,mouse_down:!1,cover_opacity:0})}},{key:"on_mouse_move",value:function(e){if(this.state.mouse_down){var t=this.get_event_cordinates(e),a={x:t.x-this.state.start_x,y:t.y-this.state.start_y,cover_opacity:0,choice:null},n=a.x/(window.screen.width/4);Math.abs(n)>.3&&(a.cover_opacity=.5*Math.abs(n),a.choice=n>0),this.setState(a)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"photo-display-wrapper"},o.a.createElement("div",{className:"photo-display",onTouchMove:this.on_mouse_move,onTouchStart:this.on_mouse_down,onTouchEnd:this.on_mouse_up,onMouseMove:this.on_mouse_move,onMouseDown:this.on_mouse_down,onMouseUp:this.on_mouse_up,style:{position:"relative",left:"".concat(this.state.x,"px"),top:"".concat(this.state.y,"px")}},o.a.createElement("div",{className:"cover",style:{opacity:this.state.cover_opacity}},o.a.createElement("div",{className:"content"},this.state.choice?o.a.createElement(h.a,{icon:p.b}):":(")),o.a.createElement("img",{src:this.props.img})))}}]),a}(n.Component),d=a(9),_=a.n(d),y=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={img_path:""},n.load_photo=n.load_photo.bind(Object(u.a)(n)),n.photo_action=n.photo_action.bind(Object(u.a)(n)),n}return Object(r.a)(a,[{key:"photo_action",value:function(e){var t=this,a=this.state.img_path.split("id=");a=a[a.length-1],_.a.get("/image_action?id="+a+"&action="+e,(function(e){t.load_photo()}),"json")}},{key:"load_photo",value:function(){var e=this;_.a.get("/next_image",(function(t){e.setState({img_path:t})}),"json").fail((function(){e.setState({img_path:""})}))}},{key:"componentDidMount",value:function(){this.load_photo()}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},this.state.img_path?o.a.createElement(v,{img:this.state.img_path,photo_action:this.photo_action}):o.a.createElement("div",{className:"no-pic"},o.a.createElement("div",{className:"thumbnail"},o.a.createElement(h.a,{icon:p.a})),"No more unfiltered pictures"))}}]),a}(n.Component),f=a(16),w=a(15),b=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(r.a)(a,[{key:"load_data",value:function(e){var t=this;_.a.get("/images?type="+e,(function(e){t.setState({data:e})}),"json")}},{key:"componentDidMount",value:function(){this.load_data(this.props.type)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.load_data(this.props.type)}},{key:"render",value:function(){var e,t=[],a=Object(w.a)(this.state.data.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(f.a)(e.value,2),i=n[0],c=n[1];t.push(o.a.createElement("div",{className:"thumbnail",key:i},o.a.createElement("img",{src:c,alt:"image"})))}}catch(s){a.e(s)}finally{a.f()}return o.a.createElement("div",{className:"images-view"},t)}}]),a}(n.Component),g=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).views={swipe:o.a.createElement(y,null),liked_view:o.a.createElement(b,{type:"liked"}),unliked_view:o.a.createElement(b,{type:"unliked"})},n.state={current_view:n.views.swipe},n.changeView=n.changeView.bind(Object(u.a)(n)),n}return Object(r.a)(a,[{key:"changeView",value:function(e){this.setState({current_view:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("div",{className:"left"},o.a.createElement("div",{className:"logo"},"SwipeToLike")),o.a.createElement("div",{className:"right"},o.a.createElement("div",{className:"btn",onClick:function(){return e.changeView(e.views.liked_view)}},o.a.createElement(h.a,{icon:p.e})," Liked"),o.a.createElement("div",{className:"btn",onClick:function(){return e.changeView(e.views.unliked_view)}},o.a.createElement(h.a,{icon:p.d})," Unliked"),o.a.createElement("div",{className:"btn",onClick:function(){return e.changeView(e.views.swipe)}},o.a.createElement(h.a,{icon:p.c})))),this.state.current_view)}}]),a}(n.Component);a(29);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.2934469a.chunk.js.map